<html>

  <head>
      <!-- Link this file to the styles.css file in the static folder -->
      <link rel=stylesheet type=text/css href="{{url_for('static',filename='styles.css') }}">
    </head>

  <body>

    <h1>Catalogue</h1>

    <!-- Check if a user is logged in and show the correct button -->
    {% if log_in_stat == None %}
    <button><a href={{url_for('showLogin')}} ><h3>LOGIN</h3></a></button>
    {% else %}
    <button><a href={{url_for('gdisconnect')}} ><h3>LOGOUT</h3></a></button>
    {% endif %}

    {% with messages = get_flashed_messages() %}
      {% if messages %}

        <ul>
          {% for message in messages %}

            <li> <strong> {{ message }} </strong> </li>

          {% endfor %}
        </ul>
      {% endif %}
    {% endwith %}

    <button><a href="{{url_for('newCategory')}}">Add a new Category</a></button>

    {% for category in categories %}

      <h2><a href='{{url_for('showItems', category_id=category.id)}}'>{{category.title}} uid({{category.user_id}})</a></h2>

      <button><a href="{{url_for('editCategory', category_id=category.id)}}">Edit</a></button>
      <button><a href="{{url_for('deleteCategory', category_id=category.id)}}">Delete</a></button>

      {% if selected_id == category.id %}
        <button><a href="{{url_for('newItem', category_id=category.id)}}">New</a></button>

        </br></br>
        {% endif %}

      {% if items and category.id == items[0].category_id %}

        {% for item in items %}


          <h3><a href='{{url_for('showItem', category_id=category.id, item_id=item.id) }}' >{{item.title}}</h3></a>
          <button><a href='{{url_for('editItem', category_id=category.id, item_id=item.id) }}' >Edit</a></button>
          <button><a href='{{url_for('deleteItem', category_id=category.id, item_id=item.id) }}' >Delete</a></button>

        {% endfor %}
      {% endif %}


      </br></br>

    {% endfor %}

    </body>

</html>
